<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JSON Viewer - Visualize JSON with Images</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <meta name="description" content="A powerful JSON viewer that automatically detects and displays image URLs inline">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap"
        rel="stylesheet">
    <script src="diff.js"></script>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="header-top">
                    <div class="logo">
                        <span class="logo-icon">{ }</span>
                        <h1>DevTools</h1>
                    </div>
                    <button id="historyToggleBtn" class="btn btn-secondary">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <circle cx="12" cy="12" r="10" />
                            <polyline points="12 6 12 12 16 14" />
                        </svg>
                        History
                    </button>
                </div>

                <!-- Main Navigation Tabs -->
                <nav class="main-nav">
                    <button class="nav-tab active" data-tab="jsonViewer">JSON Viewer</button>
                    <button class="nav-tab" data-tab="textComparer">Text Comparer</button>
                </nav>
            </div>
        </header>

        <!-- History Sidebar -->
        <aside id="historySidebar" class="history-sidebar hidden">
            <div class="history-header">
                <h3>History</h3>
                <div class="history-actions">
                    <button id="clearHistoryBtn" class="btn btn-danger btn-sm" title="Clear all history">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <polyline points="3 6 5 6 21 6" />
                            <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" />
                        </svg>
                    </button>
                    <button id="closeHistoryBtn" class="btn btn-secondary btn-sm" title="Close">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <line x1="18" y1="6" x2="6" y2="18" />
                            <line x1="6" y1="6" x2="18" y2="18" />
                        </svg>
                    </button>
                </div>
            </div>
            <div id="historyList" class="history-list">
                <div class="history-empty">No history yet</div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">

            <!-- APPLICATION 1: JSON VIEWER -->
            <div id="jsonViewerTab" class="app-tab-content">
                <!-- Input Section -->
                <section class="input-section">
                    <div class="input-header">
                        <h2>Input JSON</h2>
                        <div class="input-actions">
                            <label class="upload-btn">
                                <input type="file" id="fileInput" accept=".json,application/json" hidden>
                                <span class="btn btn-secondary">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                        stroke-width="2">
                                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                                        <polyline points="17 8 12 3 7 8" />
                                        <line x1="12" y1="3" x2="12" y2="15" />
                                    </svg>
                                    Upload JSON
                                </span>
                            </label>
                            <button id="pasteBtn" class="btn btn-secondary">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <path
                                        d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2" />
                                    <rect x="8" y="2" width="8" height="4" rx="1" ry="1" />
                                </svg>
                                Paste
                            </button>
                            <button id="copyInputBtn" class="btn btn-secondary">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <rect x="9" y="9" width="13" height="13" rx="2" ry="2" />
                                    <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2-2v1" />
                                </svg>
                                Copy
                            </button>
                            <button id="clearBtn" class="btn btn-danger">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <polyline points="3 6 5 6 21 6" />
                                    <path
                                        d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" />
                                </svg>
                                Clear
                            </button>
                        </div>
                    </div>
                    <div class="textarea-wrapper">
                        <textarea id="jsonInput" placeholder='Paste your JSON here or upload a file...

Example:
{
  "name": "Product",
  "images": [
    "https://example.com/image1.jpg",
    "https://example.com/image2.png"
  ]
}'></textarea>
                        <div class="input-footer">
                            <span id="charCount" class="char-count">0 characters</span>
                            <button id="formatBtn" class="btn btn-primary">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <path d="M12 20V10" />
                                    <path d="M18 20V4" />
                                    <path d="M6 20v-4" />
                                </svg>
                                Format & View
                            </button>
                        </div>
                    </div>
                    <div id="errorMessage" class="error-message hidden"></div>
                </section>

                <!-- Output Section -->
                <section id="outputSection" class="output-section hidden">
                    <div class="output-header">
                        <h2>JSON Structure</h2>
                        <div class="output-actions">
                            <div class="view-toggle">
                                <button id="treeViewBtn" class="toggle-btn active" data-view="tree">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                        stroke-width="2">
                                        <path d="M22 12h-4l-3 9L9 3l-3 9H2" />
                                    </svg>
                                    Tree View
                                </button>
                                <button id="rawViewBtn" class="toggle-btn" data-view="raw">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                        stroke-width="2">
                                        <polyline points="16 18 22 12 16 6" />
                                        <polyline points="8 6 2 12 8 18" />
                                    </svg>
                                    Raw View
                                </button>
                            </div>
                            <button id="expandAllBtn" class="btn btn-secondary">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <polyline points="15 3 21 3 21 9" />
                                    <polyline points="9 21 3 21 3 15" />
                                    <line x1="21" y1="3" x2="14" y2="10" />
                                    <line x1="3" y1="21" x2="10" y2="14" />
                                </svg>
                                Expand All
                            </button>
                            <button id="collapseAllBtn" class="btn btn-secondary">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <polyline points="4 14 10 14 10 20" />
                                    <polyline points="20 10 14 10 14 4" />
                                    <line x1="14" y1="10" x2="21" y2="3" />
                                    <line x1="3" y1="21" x2="10" y2="14" />
                                </svg>
                                Collapse All
                            </button>
                            <button id="toggleImagesBtn" class="btn btn-secondary active" title="Toggle image previews">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <rect x="3" y="3" width="18" height="18" rx="2" ry="2" />
                                    <circle cx="8.5" cy="8.5" r="1.5" />
                                    <polyline points="21 15 16 10 5 21" />
                                </svg>
                                Images On
                            </button>
                            <button id="copyBtn" class="btn btn-secondary">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <rect x="9" y="9" width="13" height="13" rx="2" ry="2" />
                                    <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1" />
                                </svg>
                                Copy
                            </button>
                        </div>
                    </div>

                    <!-- Stats Bar -->
                    <div class="stats-bar">
                        <div class="stat">
                            <span class="stat-label">Keys</span>
                            <span id="keyCount" class="stat-value">0</span>
                        </div>
                        <div class="stat">
                            <span class="stat-label">Arrays</span>
                            <span id="arrayCount" class="stat-value">0</span>
                        </div>
                        <div class="stat">
                            <span class="stat-label">Objects</span>
                            <span id="objectCount" class="stat-value">0</span>
                        </div>
                        <div class="stat highlight">
                            <span class="stat-label">URLs</span>
                            <span id="urlCount" class="stat-value">0</span>
                        </div>
                        <div class="stat highlight">
                            <span class="stat-label">Images</span>
                            <span id="imageCount" class="stat-value">0</span>
                        </div>
                    </div>

                    <!-- Search Bar -->
                    <div id="searchBar" class="search-bar hidden">
                        <div class="search-input-wrapper">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <circle cx="11" cy="11" r="8" />
                                <line x1="21" y1="21" x2="16.65" y2="16.65" />
                            </svg>
                            <input type="text" id="searchInput" placeholder="Search keys and values..."
                                autocomplete="off">
                            <span id="searchCount" class="search-count"></span>
                        </div>
                        <div class="search-nav">
                            <button id="searchPrev" class="search-nav-btn" title="Previous (Shift+Enter)">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <polyline points="18 15 12 9 6 15" />
                                </svg>
                            </button>
                            <button id="searchNext" class="search-nav-btn" title="Next (Enter)">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <polyline points="6 9 12 15 18 9" />
                                </svg>
                            </button>
                            <button id="searchClose" class="search-nav-btn" title="Close (Escape)">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <line x1="18" y1="6" x2="6" y2="18" />
                                    <line x1="6" y1="6" x2="18" y2="18" />
                                </svg>
                            </button>
                        </div>
                    </div>

                    <!-- JSON Output -->
                    <div id="jsonOutput" class="json-output"></div>
                    <pre id="rawOutput" class="raw-output hidden"></pre>
                </section>
            </div>

            <!-- APPLICATION 2: TEXT COMPARER -->
            <div id="textComparerTab" class="app-tab-content hidden">
                <section class="comparer-section">
                    <div class="comparer-inputs">
                        <div class="source-input">
                            <div class="input-header">
                                <h2>Original Text</h2>
                                <button id="pasteOriginalBtn" class="btn btn-secondary btn-sm">Paste</button>
                            </div>
                            <textarea id="originalInput" placeholder="Enter original text here..."></textarea>
                        </div>
                        <div class="source-input">
                            <div class="input-header">
                                <h2>Modified Text</h2>
                                <button id="pasteModifiedBtn" class="btn btn-secondary btn-sm">Paste</button>
                            </div>
                            <textarea id="modifiedInput" placeholder="Enter modified text here..."></textarea>
                        </div>
                    </div>

                    <div class="comparer-actions">
                        <button id="compareBtn" class="btn btn-primary btn-lg">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <path d="M16 3h5v5M4 20L21 3M21 16v5h-5M4 4l5 5" />
                            </svg>
                            Compare Text
                        </button>
                        <button id="clearCompareBtn" class="btn btn-danger">Clear All</button>
                    </div>

                    <div id="compareOutput" class="compare-output hidden">
                        <div class="output-header">
                            <h2>Comparison Result</h2>
                            <div class="legend">
                                <span class="legend-item added">Added</span>
                                <span class="legend-item removed">Removed</span>
                            </div>
                        </div>
                        <div id="diffResult" class="diff-result"></div>
                    </div>
                </section>
            </div>

            <!-- Image Gallery (lightbox) -->
            <div id="imageGallery" class="image-gallery hidden">
                <button id="closeGallery" class="gallery-close">&times;</button>
                <div class="gallery-content">
                    <button id="prevImage" class="gallery-nav prev">&lt;</button>
                    <div class="gallery-image-container">
                        <img id="galleryImage" src="" alt="Preview">
                        <div class="gallery-info">
                            <div class="gallery-info-row">
                                <span class="gallery-label">Path:</span>
                                <code id="galleryPath" class="gallery-path"></code>
                                <button id="copyPathBtn" class="copy-btn" title="Copy path">
                                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                        stroke-width="2">
                                        <rect x="9" y="9" width="13" height="13" rx="2" ry="2" />
                                        <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1" />
                                    </svg>
                                </button>
                            </div>
                            <div class="gallery-info-row">
                                <span class="gallery-label">URL:</span>
                                <code id="galleryUrl" class="gallery-url"></code>
                                <button id="copyUrlBtn" class="copy-btn" title="Copy URL">
                                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                        stroke-width="2">
                                        <rect x="9" y="9" width="13" height="13" rx="2" ry="2" />
                                        <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1" />
                                    </svg>
                                </button>
                            </div>
                        </div>
                    </div>
                    <button id="nextImage" class="gallery-nav next">&gt;</button>
                </div>
                <div id="galleryThumbs" class="gallery-thumbs"></div>
            </div>
        </main>
    </div>

    <script src="app.js"></script>
</body>

</html>